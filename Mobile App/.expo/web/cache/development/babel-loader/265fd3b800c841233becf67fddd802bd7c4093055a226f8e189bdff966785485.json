{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.callMicrotasks = void 0;\nexports.runOnJS = runOnJS;\nexports.runOnUI = runOnUI;\nexports.runOnUIImmediately = runOnUIImmediately;\nexports.setupMicrotasks = setupMicrotasks;\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _NativeReanimated = _interopRequireDefault(require(\"./NativeReanimated\"));\nvar _PlatformChecker = require(\"./PlatformChecker\");\nvar _shareables = require(\"./shareables\");\nvar IS_JEST = (0, _PlatformChecker.isJest)();\nvar IS_WEB = (0, _PlatformChecker.shouldBeUseWeb)();\nvar _runOnUIQueue = [];\nfunction setupMicrotasks() {\n  'worklet';\n\n  var microtasksQueue = [];\n  var isExecutingMicrotasksQueue = false;\n  global.queueMicrotask = function (callback) {\n    microtasksQueue.push(callback);\n    return -1;\n  };\n  global.__callMicrotasks = function () {\n    if (isExecutingMicrotasksQueue) {\n      return;\n    }\n    try {\n      isExecutingMicrotasksQueue = true;\n      for (var index = 0; index < microtasksQueue.length; index += 1) {\n        microtasksQueue[index]();\n      }\n      microtasksQueue = [];\n      global._maybeFlushUIUpdatesQueue();\n    } finally {\n      isExecutingMicrotasksQueue = false;\n    }\n  };\n}\nfunction callMicrotasksOnUIThread() {\n  'worklet';\n\n  global.__callMicrotasks();\n}\nvar callMicrotasks = (0, _PlatformChecker.shouldBeUseWeb)() ? function () {} : callMicrotasksOnUIThread;\nexports.callMicrotasks = callMicrotasks;\nfunction runOnUI(worklet) {\n  'worklet';\n\n  if (__DEV__ && !IS_WEB && _WORKLET) {\n    throw new Error('runOnUI() cannot be called on the UI runtime. Please call the function synchronously or use `queueMicrotask` or `requestAnimationFrame` instead.');\n  }\n  if (__DEV__ && !IS_WEB && worklet.__workletHash === undefined) {\n    throw new Error('runOnUI() can only be used on worklets');\n  }\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    if (IS_JEST) {\n      _NativeReanimated.default.scheduleOnUI((0, _shareables.makeShareableCloneRecursive)(function () {\n        'worklet';\n\n        worklet.apply(void 0, args);\n      }));\n      return;\n    }\n    if (__DEV__) {\n      (0, _shareables.makeShareableCloneRecursive)(worklet);\n      (0, _shareables.makeShareableCloneRecursive)(args);\n    }\n    _runOnUIQueue.push([worklet, args]);\n    if (_runOnUIQueue.length === 1) {\n      queueMicrotask(function () {\n        var queue = _runOnUIQueue;\n        _runOnUIQueue = [];\n        _NativeReanimated.default.scheduleOnUI((0, _shareables.makeShareableCloneRecursive)(function () {\n          'worklet';\n\n          queue.forEach(function (_ref) {\n            var _ref2 = (0, _slicedToArray2.default)(_ref, 2),\n              worklet = _ref2[0],\n              args = _ref2[1];\n            worklet.apply(void 0, (0, _toConsumableArray2.default)(args));\n          });\n          callMicrotasks();\n        }));\n      });\n    }\n  };\n}\nfunction runOnUIImmediately(worklet) {\n  'worklet';\n\n  if (__DEV__ && !IS_WEB && _WORKLET) {\n    throw new Error('runOnUIImmediately() cannot be called on the UI runtime. Please call the function synchronously or use `queueMicrotask` or `requestAnimationFrame` instead.');\n  }\n  if (__DEV__ && !IS_WEB && worklet.__workletHash === undefined) {\n    throw new Error('runOnUIImmediately() can only be used on worklets');\n  }\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    _NativeReanimated.default.scheduleOnUI((0, _shareables.makeShareableCloneRecursive)(function () {\n      'worklet';\n\n      worklet.apply(void 0, args);\n    }));\n  };\n}\nif (__DEV__ && !IS_WEB) {\n  var f = function f() {\n    'worklet';\n  };\n  if (f.__workletHash === undefined) {\n    throw new Error('Failed to create a worklet. Did you forget to add Reanimated Babel plugin in babel.config.js? See installation docs at https://docs.swmansion.com/react-native-reanimated/docs/fundamentals/installation#babel-plugin.');\n  }\n}\nfunction runOnJS(fun) {\n  'worklet';\n\n  if (fun.__remoteFunction) {\n    fun = fun.__remoteFunction;\n  }\n  if (!_WORKLET) {\n    return fun;\n  }\n  return function () {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n    _scheduleOnJS(fun, args.length > 0 ? (0, _shareables.makeShareableCloneOnUIRecursive)(args) : undefined);\n  };\n}","map":{"version":3,"names":["_NativeReanimated","_interopRequireDefault","require","_PlatformChecker","_shareables","IS_JEST","isJest","IS_WEB","shouldBeUseWeb","_runOnUIQueue","setupMicrotasks","microtasksQueue","isExecutingMicrotasksQueue","global","queueMicrotask","callback","push","__callMicrotasks","index","length","_maybeFlushUIUpdatesQueue","callMicrotasksOnUIThread","callMicrotasks","exports","runOnUI","worklet","__DEV__","_WORKLET","Error","__workletHash","undefined","_len","arguments","args","Array","_key","NativeReanimatedModule","scheduleOnUI","makeShareableCloneRecursive","apply","queue","forEach","_ref","_ref2","_slicedToArray2","default","_toConsumableArray2","runOnUIImmediately","_len2","_key2","f","runOnJS","fun","__remoteFunction","_len3","_key3","_scheduleOnJS","makeShareableCloneOnUIRecursive"],"sources":["D:\\vikash\\AgroIntelPro-RN-App\\node_modules\\react-native-reanimated\\lib\\module\\reanimated2\\threads.ts"],"sourcesContent":["import NativeReanimatedModule from './NativeReanimated';\nimport { isJest, shouldBeUseWeb } from './PlatformChecker';\nimport { ComplexWorkletFunction } from './commonTypes';\nimport {\n  makeShareableCloneOnUIRecursive,\n  makeShareableCloneRecursive,\n} from './shareables';\n\nconst IS_JEST = isJest();\nconst IS_WEB = shouldBeUseWeb();\n\nlet _runOnUIQueue: Array<[ComplexWorkletFunction<any[], any>, any[]]> = [];\n\nexport function setupMicrotasks() {\n  'worklet';\n\n  let microtasksQueue: Array<() => void> = [];\n  let isExecutingMicrotasksQueue = false;\n\n  // @ts-ignore â€“ typescript expects this to conform to NodeJS definition and expects the return value to be NodeJS.Immediate which is an object and not a number\n  global.queueMicrotask = (callback: () => void): number => {\n    microtasksQueue.push(callback);\n    return -1;\n  };\n\n  global.__callMicrotasks = () => {\n    if (isExecutingMicrotasksQueue) {\n      return;\n    }\n    try {\n      isExecutingMicrotasksQueue = true;\n      for (let index = 0; index < microtasksQueue.length; index += 1) {\n        // we use classic 'for' loop because the size of the currentTasks array may change while executing some of the callbacks due to queueMicrotask calls\n        microtasksQueue[index]();\n      }\n      microtasksQueue = [];\n      global._maybeFlushUIUpdatesQueue();\n    } finally {\n      isExecutingMicrotasksQueue = false;\n    }\n  };\n}\n\nfunction callMicrotasksOnUIThread() {\n  'worklet';\n  global.__callMicrotasks();\n}\n\nexport const callMicrotasks = shouldBeUseWeb()\n  ? () => {\n      // on web flushing is a noop as immediates are handled by the browser\n    }\n  : callMicrotasksOnUIThread;\n\n/**\n * Schedule a worklet to execute on the UI runtime. This method does not schedule the work immediately but instead\n * waits for other worklets to be scheduled within the same JS loop. It uses queueMicrotask to schedule all the worklets\n * at once making sure they will run within the same frame boundaries on the UI thread.\n */\nexport function runOnUI<A extends any[], R>(\n  worklet: ComplexWorkletFunction<A, R>\n): (...args: A) => void {\n  'worklet';\n  if (__DEV__ && !IS_WEB && _WORKLET) {\n    throw new Error(\n      'runOnUI() cannot be called on the UI runtime. Please call the function synchronously or use `queueMicrotask` or `requestAnimationFrame` instead.'\n    );\n  }\n  if (__DEV__ && !IS_WEB && worklet.__workletHash === undefined) {\n    throw new Error('runOnUI() can only be used on worklets');\n  }\n  return (...args) => {\n    if (IS_JEST) {\n      // Mocking time in Jest is tricky as both requestAnimationFrame and queueMicrotask\n      // callbacks run on the same queue and can be interleaved. There is no way\n      // to flush particular queue in Jest and the only control over mocked timers\n      // is by using jest.advanceTimersByTime() method which advances all types\n      // of timers including immediate and animation callbacks. Ideally we'd like\n      // to have some way here to schedule work along with React updates, but\n      // that's not possible, and hence in Jest environment instead of using scheduling\n      // mechanism we just schedule the work ommiting the queue. This is ok for the\n      // uses that we currently have but may not be ok for future tests that we write.\n      NativeReanimatedModule.scheduleOnUI(\n        makeShareableCloneRecursive(() => {\n          'worklet';\n          worklet(...args);\n        })\n      );\n      return;\n    }\n    if (__DEV__) {\n      // in DEV mode we call shareable conversion here because in case the object\n      // can't be converted, we will get a meaningful stack-trace as opposed to the\n      // situation when conversion is only done via microtask queue. This does not\n      // make the app particularily less efficient as converted objects are cached\n      // and for a given worklet the conversion only happens once.\n      makeShareableCloneRecursive(worklet);\n      makeShareableCloneRecursive(args);\n    }\n    _runOnUIQueue.push([worklet, args]);\n    if (_runOnUIQueue.length === 1) {\n      queueMicrotask(() => {\n        const queue = _runOnUIQueue;\n        _runOnUIQueue = [];\n        NativeReanimatedModule.scheduleOnUI(\n          makeShareableCloneRecursive(() => {\n            'worklet';\n            queue.forEach(([worklet, args]) => {\n              worklet(...args);\n            });\n            callMicrotasks();\n          })\n        );\n      });\n    }\n  };\n}\n\n/**\n * Schedule a worklet to execute on the UI runtime skipping batching mechanism.\n */\nexport function runOnUIImmediately<A extends any[], R>(\n  worklet: ComplexWorkletFunction<A, R>\n): (...args: A) => void {\n  'worklet';\n  if (__DEV__ && !IS_WEB && _WORKLET) {\n    throw new Error(\n      'runOnUIImmediately() cannot be called on the UI runtime. Please call the function synchronously or use `queueMicrotask` or `requestAnimationFrame` instead.'\n    );\n  }\n  if (__DEV__ && !IS_WEB && worklet.__workletHash === undefined) {\n    throw new Error('runOnUIImmediately() can only be used on worklets');\n  }\n  return (...args) => {\n    NativeReanimatedModule.scheduleOnUI(\n      makeShareableCloneRecursive(() => {\n        'worklet';\n        worklet(...args);\n      })\n    );\n  };\n}\n\nif (__DEV__ && !IS_WEB) {\n  const f = () => {\n    'worklet';\n  };\n  // @ts-ignore plugin\n  if (f.__workletHash === undefined) {\n    throw new Error(\n      'Failed to create a worklet. Did you forget to add Reanimated Babel plugin in babel.config.js? See installation docs at https://docs.swmansion.com/react-native-reanimated/docs/fundamentals/installation#babel-plugin.'\n    );\n  }\n}\n\nexport function runOnJS<A extends any[], R>(\n  fun: ComplexWorkletFunction<A, R>\n): (...args: A) => void {\n  'worklet';\n  if (fun.__remoteFunction) {\n    // in development mode the function provided as `fun` throws an error message\n    // such that when someone accidently calls it directly on the UI runtime, they\n    // see that they should use `runOnJS` instead. To facilitate that we purt the\n    // reference to the original remote function in the `__remoteFunction` property.\n    fun = fun.__remoteFunction;\n  }\n  if (!_WORKLET) {\n    return fun;\n  }\n  return (...args) => {\n    _scheduleOnJS(\n      fun,\n      args.length > 0 ? makeShareableCloneOnUIRecursive(args) : undefined\n    );\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}