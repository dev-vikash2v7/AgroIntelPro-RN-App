{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _expoModulesCore = require(\"expo-modules-core\");\nvar _KeepAwake = require(\"./KeepAwake.types\");\nvar _isAvailableAsync, _activate, _deactivate;\nvar wakeLockMap = {};\nvar _default = {\n  isAvailableAsync: function isAvailableAsync() {\n    return (_isAvailableAsync = _isAvailableAsync || (0, _asyncToGenerator2.default)(function* () {\n      if (_expoModulesCore.Platform.isDOMAvailable) {\n        return 'wakeLock' in navigator;\n      }\n      return false;\n    })).apply(this, arguments);\n  },\n  activate: function activate(_x) {\n    return (_activate = _activate || (0, _asyncToGenerator2.default)(function* (tag) {\n      if (!_expoModulesCore.Platform.isDOMAvailable) {\n        return;\n      }\n      var wakeLock = yield navigator.wakeLock.request('screen');\n      wakeLockMap[tag] = wakeLock;\n    })).apply(this, arguments);\n  },\n  deactivate: function deactivate(_x2) {\n    return (_deactivate = _deactivate || (0, _asyncToGenerator2.default)(function* (tag) {\n      if (!_expoModulesCore.Platform.isDOMAvailable) {\n        return;\n      }\n      if (wakeLockMap[tag]) {\n        var _wakeLockMap$tag$rele, _wakeLockMap$tag;\n        (_wakeLockMap$tag$rele = (_wakeLockMap$tag = wakeLockMap[tag]).release) == null ? void 0 : _wakeLockMap$tag$rele.call(_wakeLockMap$tag);\n        delete wakeLockMap[tag];\n      } else {\n        throw new _expoModulesCore.CodedError('ERR_KEEP_AWAKE_TAG_INVALID', `The wake lock with tag ${tag} has not activated yet`);\n      }\n    })).apply(this, arguments);\n  },\n  addListenerForTag: function addListenerForTag(tag, listener) {\n    var eventListener = function eventListener() {\n      listener({\n        state: _KeepAwake.KeepAwakeEventState.RELEASE\n      });\n    };\n    var sentinel = wakeLockMap[tag];\n    if (sentinel) {\n      if ('addEventListener' in sentinel) {\n        sentinel.addEventListener == null ? void 0 : sentinel.addEventListener('release', eventListener);\n      } else {\n        sentinel.onrelease = eventListener;\n      }\n    }\n    return {\n      remove: function remove() {\n        var sentinel = wakeLockMap[tag];\n        if (sentinel) {\n          if (sentinel.removeEventListener) {\n            sentinel.removeEventListener('release', eventListener);\n          } else {\n            sentinel.onrelease = null;\n          }\n        }\n      }\n    };\n  }\n};\nexports.default = _default;","map":{"version":3,"names":["_expoModulesCore","require","_KeepAwake","_isAvailableAsync","_activate","_deactivate","wakeLockMap","_default","isAvailableAsync","_asyncToGenerator2","default","Platform","isDOMAvailable","navigator","apply","arguments","activate","_x","tag","wakeLock","request","deactivate","_x2","_wakeLockMap$tag$rele","_wakeLockMap$tag","release","call","CodedError","addListenerForTag","listener","eventListener","state","KeepAwakeEventState","RELEASE","sentinel","addEventListener","onrelease","remove","removeEventListener","exports"],"sources":["E:\\React Native Android Apps\\AgrI Intel Pro - Hackaton Project\\node_modules\\expo-keep-awake\\src\\ExpoKeepAwake.web.ts"],"sourcesContent":["import { CodedError, Platform, Subscription } from 'expo-modules-core';\n\nimport { KeepAwakeEventState, KeepAwakeListener } from './KeepAwake.types';\n\nconst wakeLockMap: Record<string, WakeLockSentinel> = {};\n\ntype WakeLockSentinel = {\n  onrelease: null | ((event: any) => void);\n  released: boolean;\n  type: 'screen';\n  release?: Function;\n\n  addEventListener?: (event: string, listener: (event: any) => void) => void;\n  removeEventListener?: (event: string, listener: (event: any) => void) => void;\n};\n\ndeclare const navigator: {\n  wakeLock: {\n    request(type: 'screen'): Promise<WakeLockSentinel>;\n  };\n};\n\n/** Wraps the webWakeLock API https://developer.mozilla.org/en-US/docs/Web/API/Screen_Wake_Lock_API */\nexport default {\n  async isAvailableAsync() {\n    if (Platform.isDOMAvailable) {\n      return 'wakeLock' in navigator;\n    }\n    return false;\n  },\n  async activate(tag: string) {\n    if (!Platform.isDOMAvailable) {\n      return;\n    }\n    const wakeLock = await navigator.wakeLock.request('screen');\n    wakeLockMap[tag] = wakeLock;\n  },\n  async deactivate(tag: string) {\n    if (!Platform.isDOMAvailable) {\n      return;\n    }\n    if (wakeLockMap[tag]) {\n      wakeLockMap[tag].release?.();\n      delete wakeLockMap[tag];\n    } else {\n      throw new CodedError(\n        'ERR_KEEP_AWAKE_TAG_INVALID',\n        `The wake lock with tag ${tag} has not activated yet`\n      );\n    }\n  },\n  addListenerForTag(tag: string, listener: KeepAwakeListener): Subscription {\n    const eventListener = () => {\n      listener({ state: KeepAwakeEventState.RELEASE });\n    };\n    const sentinel = wakeLockMap[tag];\n    if (sentinel) {\n      if ('addEventListener' in sentinel) {\n        sentinel.addEventListener?.('release', eventListener);\n      } else {\n        sentinel.onrelease = eventListener;\n      }\n    }\n    return {\n      remove: () => {\n        const sentinel = wakeLockMap[tag];\n        if (sentinel) {\n          if (sentinel.removeEventListener) {\n            sentinel.removeEventListener('release', eventListener);\n          } else {\n            sentinel.onrelease = null;\n          }\n        }\n      },\n    };\n  },\n};\n"],"mappings":";;;;;;AAAA,IAAAA,gBAAA,GAAAC,OAAA;AAEA,IAAAC,UAAA,GAAAD,OAAA;AAA2E,IAAAE,iBAAA,EAAAC,SAAA,EAAAC,WAAA;AAE3E,IAAMC,WAAW,GAAqC,EAAE;AAAC,IAAAC,QAAA,GAmB1C;EACPC,gBAAgB,WAAAA,iBAAA;IAAA,QAAAL,iBAAA,GAAAA,iBAAA,QAAAM,kBAAA,CAAAC,OAAA;MACpB,IAAIC,yBAAQ,CAACC,cAAc,EAAE;QAC3B,OAAO,UAAU,IAAIC,SAAS;;MAEhC,OAAO,KAAK;IACd,CAAC,GAAAC,KAAA,OAAAC,SAAA;EAAA;EACKC,QAAQ,WAAAA,SAAAC,EAAA;IAAA,QAAAb,SAAA,GAAAA,SAAA,QAAAK,kBAAA,CAAAC,OAAA,aAACQ,GAAW;MACxB,IAAI,CAACP,yBAAQ,CAACC,cAAc,EAAE;QAC5B;;MAEF,IAAMO,QAAQ,SAASN,SAAS,CAACM,QAAQ,CAACC,OAAO,CAAC,QAAQ,CAAC;MAC3Dd,WAAW,CAACY,GAAG,CAAC,GAAGC,QAAQ;IAC7B,CAAC,GAAAL,KAAA,OAAAC,SAAA;EAAA;EACKM,UAAU,WAAAA,WAAAC,GAAA;IAAA,QAAAjB,WAAA,GAAAA,WAAA,QAAAI,kBAAA,CAAAC,OAAA,aAACQ,GAAW;MAC1B,IAAI,CAACP,yBAAQ,CAACC,cAAc,EAAE;QAC5B;;MAEF,IAAIN,WAAW,CAACY,GAAG,CAAC,EAAE;QAAA,IAAAK,qBAAA,EAAAC,gBAAA;QACpB,CAAAD,qBAAA,IAAAC,gBAAA,GAAAlB,WAAW,CAACY,GAAG,CAAC,EAACO,OAAO,qBAAxBF,qBAAA,CAAAG,IAAA,CAAAF,gBAA0B,CAAE;QAC5B,OAAOlB,WAAW,CAACY,GAAG,CAAC;OACxB,MAAM;QACL,MAAM,IAAIS,2BAAU,CAClB,4BAA4B,EAC5B,0BAA0BT,GAAG,wBAAwB,CACtD;;IAEL,CAAC,GAAAJ,KAAA,OAAAC,SAAA;EAAA;EACDa,iBAAiB,WAAAA,kBAACV,GAAW,EAAEW,QAA2B;IACxD,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAAQ;MACzBD,QAAQ,CAAC;QAAEE,KAAK,EAAEC,8BAAmB,CAACC;MAAO,CAAE,CAAC;IAClD,CAAC;IACD,IAAMC,QAAQ,GAAG5B,WAAW,CAACY,GAAG,CAAC;IACjC,IAAIgB,QAAQ,EAAE;MACZ,IAAI,kBAAkB,IAAIA,QAAQ,EAAE;QAClCA,QAAQ,CAACC,gBAAgB,oBAAzBD,QAAQ,CAACC,gBAAgB,CAAG,SAAS,EAAEL,aAAa,CAAC;OACtD,MAAM;QACLI,QAAQ,CAACE,SAAS,GAAGN,aAAa;;;IAGtC,OAAO;MACLO,MAAM,EAAE,SAAAA,OAAA,EAAK;QACX,IAAMH,QAAQ,GAAG5B,WAAW,CAACY,GAAG,CAAC;QACjC,IAAIgB,QAAQ,EAAE;UACZ,IAAIA,QAAQ,CAACI,mBAAmB,EAAE;YAChCJ,QAAQ,CAACI,mBAAmB,CAAC,SAAS,EAAER,aAAa,CAAC;WACvD,MAAM;YACLI,QAAQ,CAACE,SAAS,GAAG,IAAI;;;MAG/B;KACD;EACH;CACD;AAAAG,OAAA,CAAA7B,OAAA,GAAAH,QAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}